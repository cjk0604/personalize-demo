(this.webpackJsonpdemogoprime=this.webpackJsonpdemogoprime||[]).push([[0],{207:function(e,t,n){},208:function(e,t,n){},286:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),s=n(52),r=n.n(s),i=(n(207),n(208),n(68)),o=n(10),d=n(301),j=n(139),l=n(298),u=n(13),m=n.n(u),x=n(27),h=n(36),b=n(28),O=n.n(b),p=n(303),g=n(306),f=n(305),v=n(302),w=n(2);var y=function(e){e.movieName;var t=e.minHeight,n=(e.fontSize,e.imageUrl);return Object(w.jsx)(f.a,{style:{minHeight:t,display:"flex"},children:Object(w.jsx)(v.a,{centered:!0,src:n})})},I=n(191),k=n(190);function E(){return(E=Object(x.a)(m.a.mark((function e(t){var n,a,c,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"1test",c={USER_ID:"1",ITEM_ID:null!==(n=t.movieId)&&void 0!==n?n:"",TIMESTAMP:Date.now().toString(),EVENT_TYPE:null!==(a=t.EVENT_TYPE)&&void 0!==a?a:""},s=Object(k.v4)(),"https://k1js8ud1xd.execute-api.us-east-1.amazonaws.com/prod/stream/demogoprime-kinesis-stream-prd/record",e.next=6,O.a.put("https://k1js8ud1xd.execute-api.us-east-1.amazonaws.com/prod/stream/demogoprime-kinesis-stream-prd/record",{Data:c,PartitionKey:s}).then((function(e){console.log(e)})).catch((function(e){console.log(e)}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var L=function(e){var t=e.items,n=e.pageViewOrigin,a=e.cardStyle,c=Object(I.useTracking)({page:"MovieListCardPage"},{dispatch:function(e){return function(e){return E.apply(this,arguments)}(e)}}),s=c.Track,r=c.trackEvent;return Object(w.jsx)(s,{children:Object(w.jsx)(p.a.Group,{centered:!0,children:t.map((function(e){return Object(w.jsxs)(p.a,{as:i.b,to:{pathname:"/movies/".concat(e.id),state:{pageViewOrigin:n}},style:a,onClick:function(){r({EVENT_TYPE:"click",movieId:"".concat(e.id)})},children:[Object(w.jsx)(y,{movieName:e.name,minHeight:140,fontSize:24,imageUrl:e.imageUrl}),Object(w.jsxs)(p.a.Content,{children:[e.score?Object(w.jsx)(p.a.Meta,{as:"h1",children:e.name}):Object(w.jsx)(p.a.Header,{children:e.name}),Object(w.jsx)(p.a.Description,{children:Object(w.jsx)(g.a,{icon:"star",defaultRating:4,maxRating:5})}),e.category]}),Object(w.jsx)(p.a.Content,{extra:!0,children:e.score?Object(w.jsxs)(w.Fragment,{children:["Score: ",Object(w.jsx)("strong",{children:e.score})]}):Object(w.jsx)(p.a.Meta,{children:e.score})})]},e.id)}))})})};var C=function(){var e=c.a.useState([]),t=Object(h.a)(e,2),n=t[0],a=t[1],s="https://k1js8ud1xd.execute-api.us-east-1.amazonaws.com/prod/movie";return c.a.useEffect((function(){function e(){return(e=Object(x.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.get(s);case 2:t=e.sent,console.log(t.data.movies),a(t.data.movies);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),document.title="DemoGo Prime",Object(w.jsx)(l.a,{style:{marginTop:70},children:Object(w.jsx)(L,{items:n,pageViewOrigin:"Browse"})})},S=n(299),P=c.a.createContext(null),N={isLoggedIn:!1,isLoginPending:!1,loginError:null,username:"",userId:""},D=function(e){var t=Object(S.a)(N),n=Object(h.a)(t,2),a=n[0],c=n[1],s=function(e){return c({isLoginPending:e})},r=function(e){return c({isLoggedIn:e})},i=function(e){return c({loginError:e})},o=function(e){return c({username:e})},d=function(e){return c({userId:e})};return Object(w.jsx)(P.Provider,{value:{state:a,login:function(e,t,n){s(!0),r(!1),i(null),o(""),d(""),T(e,t,n,(function(t){s(!1),t?i(t):(r(!0),o(e),d("admin"===e?"1":"4"))}))},logout:function(){s(!1),r(!1),o(""),d(""),i(null)}},children:e.children})};var T=function(e,t,n,a){return a("admin"===e&&"admin"===t||"admin2"===e&&"admin2"===t?null:new Error("Invalid email and password"))},M=n(300),z=n(304),H=n(307),U=n(308);var V=function(e){var t=e.recommendedMovies,n=e.title;return Object(w.jsxs)(f.a,{style:{margin:"auto",width:"100%",maxWidth:720},children:[Object(w.jsx)(H.a,{as:"h2",children:n}),t.length>0?Object(w.jsx)(L,{items:t,pageViewOrigin:"Recommendations",cardStyle:{width:"100%",maxWidth:200}}):Object(w.jsxs)(U.a,{columns:3,children:[Object(w.jsx)(U.a.Column,{children:Object(w.jsxs)(z.a,{children:[Object(w.jsx)(z.a.Image,{rectangular:!0}),Object(w.jsx)(z.a.Line,{length:"long"}),Object(w.jsx)(z.a.Line,{})]})}),Object(w.jsx)(U.a.Column,{children:Object(w.jsxs)(z.a,{children:[Object(w.jsx)(z.a.Image,{rectangular:!0}),Object(w.jsx)(z.a.Line,{length:"long"}),Object(w.jsx)(z.a.Line,{})]})}),Object(w.jsx)(U.a.Column,{children:Object(w.jsxs)(z.a,{children:[Object(w.jsx)(z.a.Image,{rectangular:!0}),Object(w.jsx)(z.a.Line,{length:"long"}),Object(w.jsx)(z.a.Line,{})]})})]})]})};var R=function(e){var t=e.id,n=e.locationState,s=Object(a.useContext)(P),r=s.state,o=(s.login,r.isLoginPending,r.isLoggedIn,r.loginError,r.username,r.userId),d=c.a.useState({}),u=Object(h.a)(d,2),b=u[0],f=u[1],v=c.a.useState(!0),I=Object(h.a)(v,2),k=I[0],E=I[1],L=c.a.useState([]),C=Object(h.a)(L,2),S=C[0],N=C[1],D=c.a.useState([]),T=Object(h.a)(D,2),H=T[0],U=T[1],R="".concat("https://k1js8ud1xd.execute-api.us-east-1.amazonaws.com/prod/movie","/").concat(t);c.a.useEffect((function(){function e(){return(e=Object(x.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.get(R);case 2:t=e.sent,console.log(t.data),f(t.data),E(!1),document.title="".concat(t.data.name," - DemoGo Prime");case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return function(){e.apply(this,arguments)}(),function(){f({}),E(!0)}}),[t,n]);var F="".concat("https://k1js8ud1xd.execute-api.us-east-1.amazonaws.com/prod/recommendation","/").concat(o);return c.a.useEffect((function(){function e(){return(e=Object(x.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.get(F);case 2:t=e.sent,console.log(t.data.movies),N(t.data.movies);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}();var t="".concat("https://k1js8ud1xd.execute-api.us-east-1.amazonaws.com/prod/recommendation/batch","/").concat(o);function n(){return(n=Object(x.a)(m.a.mark((function e(){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.get(t);case 2:n=e.sent,console.log("batch",n.data.movies),U(n.data.movies);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){n.apply(this,arguments)}()}),[]),Object(w.jsxs)(l.a,{children:[Object(w.jsxs)(i.c,{to:"/",children:[Object(w.jsx)(j.a,{name:"arrow left"}),"Back to Movie list"]}),Object(w.jsx)(M.a,{hidden:!0}),Object(w.jsxs)(p.a,{style:{width:"100%",maxWidth:720,minHeight:100,margin:"auto"},children:[k?Object(w.jsx)(z.a,{fluid:!0,style:{minHeight:320},children:Object(w.jsx)(z.a.Image,{})}):Object(w.jsx)(y,{movieName:b.name,minHeight:100,fontSize:48,imageUrl:b.imageUrl}),k?Object(w.jsxs)(z.a,{children:[Object(w.jsx)(z.a.Line,{}),Object(w.jsx)(z.a.Line,{})]}):Object(w.jsxs)(p.a.Content,{children:[Object(w.jsx)(p.a.Header,{children:b.name}),Object(w.jsxs)(p.a.Meta,{children:[Object(w.jsx)(j.a,{name:"tag"})," ",b.category]}),Object(w.jsx)(p.a.Description,{children:Object(w.jsx)(g.a,{icon:"star",defaultRating:4,maxRating:5})}),Object(w.jsx)(p.a.Header,{as:"h1",children:" "}),Object(w.jsx)(p.a.Description,{children:"A thief who steals corporate secrets through the use of dream-sharing technology is given the inverse task of planting an idea into the mind of a C.E.O."})]})]},b.id),Object(w.jsx)(M.a,{hidden:!0}),Object(w.jsx)(V,{recommendedMovies:S,title:"\uc2e4\uc2dc\uac04 \ucd94\ucc9c \ub9ac\uc2a4\ud2b8"}),Object(w.jsx)(V,{recommendedMovies:H,title:"\ubc30\uce58(Daily) \ucd94\ucc9c \ub9ac\uc2a4\ud2b8"})]})};var F=function(){var e=Object(a.useContext)(P).logout;return Object(w.jsx)("div",{children:Object(w.jsxs)(i.a,{children:[Object(w.jsxs)(d.a,{fixed:"top",color:"teal",inverted:!0,children:[Object(w.jsx)(d.a.Menu,{children:Object(w.jsxs)(d.a.Item,{header:!0,href:"/",children:[Object(w.jsx)(j.a,{name:"tv"}),"DemoGo Prime"]})}),Object(w.jsxs)(d.a.Menu,{position:"right",children:[Object(w.jsx)(d.a.Item,{link:!0,children:"Generate"}),Object(w.jsx)(d.a.Item,{link:!0,onClick:function(t){t.preventDefault(),e()},children:"Log out"})]})]}),Object(w.jsx)(l.a,{style:{marginTop:70},children:Object(w.jsx)("h1",{children:"Welcome to the Unicorn Company"})}),Object(w.jsxs)(l.a,{style:{marginTop:70},children:[Object(w.jsx)(o.a,{path:"/",exact:!0,component:function(){return Object(w.jsx)(C,{})}}),Object(w.jsx)(o.a,{path:"/movies/:movieId",render:function(e){return Object(w.jsx)(R,{id:e.match.params.movieId,locationState:e.location.state})}})]})]})})},G={email:"",password:"",id:""},_=function(){var e=Object(a.useContext)(P),t=e.state,n=e.login,s=t.isLoginPending,r=t.isLoggedIn,i=t.loginError,o=(t.username,t.userId,Object(S.a)(G)),d=Object(h.a)(o,2),j=d[0],u=d[1];return c.a.useEffect((function(){function e(){return(e=Object(x.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.get("https://k1js8ud1xd.execute-api.us-east-1.amazonaws.com/prod/user");case 2:return t=e.sent,console.log(t.data.Items),e.abrupt("return",t.data.Items);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(v.a,{src:"/image/unicorngym.png",centered:!0,size:"medium"}),Object(w.jsx)(l.a,{text:!0,children:Object(w.jsxs)("form",{name:"loginForm",onSubmit:function(e){e.preventDefault();var t=j.email,a=j.password,c=j.id;n(t,a,c),u({email:"",password:"",id:""})},children:[Object(w.jsxs)("div",{className:"row",children:[Object(w.jsx)("div",{className:"col-sm-3 col-md-6",children:Object(w.jsx)("label",{htmlFor:"email",children:"Username"})}),Object(w.jsx)("div",{className:"col-sm-9 col-md-6",children:Object(w.jsx)("input",{type:"text",name:"email",onChange:function(e){return u({email:e.target.value})},value:j.email,placeholder:"admin"})}),Object(w.jsx)("div",{className:"col-sm-3 col-md-6",children:Object(w.jsx)("label",{htmlFor:"password",value:"admin",children:"Password"})}),Object(w.jsx)("div",{className:"col-sm-9 col-md-6",children:Object(w.jsx)("input",{type:"password",name:"password",onChange:function(e){return u({password:e.target.value})},value:j.password,placeholder:"admin"})}),Object(w.jsx)("div",{className:"col-sm-3 col-md-6"}),Object(w.jsx)("div",{className:"col-sm-9 col-md-6",children:Object(w.jsx)("input",{className:"primary",type:"submit",value:"Login"})})]}),s&&Object(w.jsx)("div",{children:"Please wait..."}),r&&Object(w.jsx)("div",{children:"Success."}),i&&Object(w.jsx)("div",{children:i.message})]})})]})};var W=function(){var e=Object(a.useContext)(P).state;return console.log("state.isLoggedIn: ",e.isLoggedIn),console.log("state.username: ",e.username),console.log("state.userId: ",e.userId),document.title="Demogo Prime",e.isLoggedIn?Object(w.jsx)("div",{className:"App",children:Object(w.jsx)(F,{})}):Object(w.jsx)(_,{})};function A(){return Object(w.jsx)(D,{value:500,children:Object(w.jsx)(W,{})})}var B=document.getElementById("root");r.a.render(Object(w.jsx)(A,{}),B)}},[[286,1,2]]]);
//# sourceMappingURL=main.c2651df1.chunk.js.map